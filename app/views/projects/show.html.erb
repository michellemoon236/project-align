<% if flash[:notice] %>
  <div class="notice_explanation">
    <%= flash[:notice] %>
    <% flash.clear %>
  </div>
<% end %>

<h2>Project: <%= @project.name %></h2>
<p>
  <strong>Description:</strong> 
  <%= @project.description %>
</p>

<table> 
  <tr>
    <th>Team members on this project</th>
  <tr>
  <% @project.users.each do |user| %>
  <tr>
    <td><li><%= user.name %> <%= '(project creator)' if UserProject.find_by(user_id: user.id, project_id: @project.id).project_creator == true %></li></td> 
  </tr>
  <% end %>
</table>


<table id="first_table">
  <tr>
    <th colspan="2">Tasks To Do</th>
  </tr>
  <% @project.tasks.not_completed.each do |task| %>
  <tr>
    <td><li><%= link_to task.content, project_task_path(@project, task) %></li></td>
    <td><%= form_for task, :url => task_complete_path(task), :method => 'get' do |f| %>
      <%= f.hidden_field :id %>
      <%= f.submit value='Completed' %>
    <% end %></td>
  </tr>
  <% end %>
</table>


<h4>JS Tasks To Do</h4>
  <% @project.tasks.not_completed.each do |task| %>
  <div id="tasks_list">
    <li><a href="#" data-id="<%=task.id%>"><%=task.content%></a></li>
  <% end %>
  <div id="task_added"></div>
  </div>

  <br><br>

<% if @project.tasks.completed.empty? == false %>
  <table>  
    <tr>
      <th>JS Tasks Completed</th>
    </tr>
    <% @project.tasks.completed.each do |task| %>
    <tr>
      <td><li><%= link_to task.content, project_task_path(@project, task) %></li></td>
    </tr>
    <% end %>
  </table><br>
<% end %>

<% if @project.tasks.completed.empty? == false %>
  <table>  
    <tr>
      <th>Tasks Completed</th>
    </tr>
    <% @project.tasks.completed.each do |task| %>
    <tr>
      <td><li><%= link_to task.content, project_task_path(@project, task) %></li></td>
    </tr>
    <% end %>
  </table><br>
<% end %>

<strong>Task Details</strong>
<div id="task_details"></div>

<div id="task_form">
</div>

<br>
<%= link_to "Add Task", new_project_task_path(@project) %> | 
<%= link_to "Edit Project", edit_project_path(@project) %> | 
<%= link_to "Delete Project", @project, method: :delete %><br><br>

<a href="#" onclick="displayCreateTaskForm(); return false;" data-id="<%=@project.id%>">JS Add Task</a>
